(()=>{"use strict";var e=function(e,t,n){var r=t.querySelector(".form__button");return r.textContent=e?"Saving...":n,r.textContent},t=function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.statusText))}))},n={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_inactive",inputErrorClass:"form__input-error_active",errorClass:"form__input_error"},r="Saving ...",o="Save",i=document.querySelector(".form__input_type_name"),a=document.querySelector(".form__input_type_job"),c=document.querySelector(".profile__edit-button"),u=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__update-image"),s=document.querySelector(".popup_type_edit-profile"),f=document.querySelector(".popup_type_add-card"),p=document.querySelector(".popup_type_update-image-profile"),d=s.querySelector(n.formSelector),_=p.querySelector(n.formSelector),y=f.querySelector(n.formSelector);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}s.querySelector(".popup__close-button"),f.querySelector(".popup__close-button"),p.querySelector(".popup__close-button"),s.querySelector(".form__input_type_name"),s.querySelector(".form__input_type_job"),p.querySelector(".form__input_type_avatar"),f.querySelector(".form__input_type_card-title"),f.querySelector(".form__input_type_card-link"),document.querySelector(".profile__name"),document.querySelector(".profile__job");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function e(t,n,r,o,i,a){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"_getCardTemplate",(function(){return c._cardTemplate.cloneNode(!0)})),m(this,"_imagePropertySetup",(function(e){e.src=c._link,e.alt=c._name})),m(this,"_deleteCard",(function(e){c._userId!==c._ownerId&&(e.style.display="none"),e.addEventListener("click",(function(){c._handleCardDelete(c._id)}))})),m(this,"_createLike",(function(e){c._cardElement.querySelector(".card__likes-count").textContent=c._likes.length,c.isLiked()&&c.likeCard(c._likes),e.addEventListener("click",(function(e){c._handleLikeIcon(c._id)}))})),m(this,"_createFigurePopup",(function(e){e.addEventListener("click",c._handleCardClick)})),m(this,"_setEventListeners",(function(e,t,n){var r=e.querySelector(".card__like");c._deleteCard(n),c._createLike(r),c._createFigurePopup(t)})),m(this,"removeCard",(function(){c._cardElement.querySelector(".card__delete").closest(".card").remove()})),m(this,"isLiked",(function(){return c._likes.some((function(e){return e._id===c._userId}))})),m(this,"likeCard",(function(e){c._likes=e,c._cardElement.querySelector(".card__likes-count").textContent=c._likes.length,c._cardElement.querySelector(".card__like").classList.toggle("card__like_active")})),m(this,"generateCard",(function(){c._cardElement=c._getCardTemplate();var e=c._cardElement.querySelector(".card__image"),t=c._cardElement.querySelector(".card__delete");c._setEventListeners(c._cardElement,e,t);var n=c._cardElement.querySelector(".card__title");return c._imagePropertySetup(e),n.textContent=c._name,c._cardElement})),this._name=t.name,this._link=t.link,this._id=t._id,this._ownerId=t.owner._id,this._likes=t.likes,this._cardSelector=n,this._cardTemplate=document.querySelector(this._cardSelector).content.querySelector(".card"),this._userId=r,this._handleCardClick=o,this._handleCardDelete=i,this._handleLikeIcon=a};function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),g(this,"_handleClickClose",(function(e){console.log("123"),e.target===e.currentTarget&&(console.log("456"),n.close())})),g(this,"_handleButtonClose",(function(){console.log("icon"),n.close()})),this._popupElement=document.querySelector(t),this.setEventListeners=this.setEventListeners.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popupElement.querySelector(".popup__close-button").addEventListener("click",this._handleButtonClose),this._popupElement.addEventListener("click",this._handleClickClose)}}])&&v(t.prototype,n),e}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},k(e,t,n||e)}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function j(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(){return w(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e,t){var n=this._popupElement.querySelector(".popup__image"),r=this._popupElement.querySelector(".popup__caption");n.src=e,n.alt=t,r.ariaLabel=t,r.textContent=t,k(L(a.prototype),"open",this).call(this)}}])&&C(t.prototype,n),a}(E);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},R(e,t,n||e)}function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}function A(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(o){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return A(this,e)});function a(e,t){var n,r,o,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),c=function(){var e,t=function(e){if(Array.isArray(e))return I(e)}(e=n._formElement.querySelectorAll(".form__input"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r={};return t.forEach((function(e){r[e.name]=e.value})),r},(o="_getInputValues")in(r=x(n=i.call(this,e)))?Object.defineProperty(r,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[o]=c,n._submitHandler=t,n._formElement=n._popupElement.querySelector(".form"),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;R(B(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault,e._submitHandler(e._getInputValues()),console.log(e._submitHandler)}))}},{key:"close",value:function(){R(B(a.prototype),"close",this).call(this),this._formElement.reset()}}])&&T(t.prototype,n),a}(E);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},F(e,t,n||e)}function J(e,t){return J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},J(e,t)}function M(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=z(r);if(o){var n=z(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return M(this,e)});function a(){var e;H(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return G($(e=i.call.apply(i,[this].concat(n))),"setAction",(function(t){e._submitHandler=t})),e}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;F(z(a.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e._submitHandler()}))}}])&&N(t.prototype,n),a}(E);function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Q(this,"_showError",(function(e){var t=r._settings,n=t.inputErrorClass,o=t.errorClass,i=e.validationMessage,a=r._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(o),a.textContent=i,a.classList.add(n)})),Q(this,"_hideError",(function(e){var t=r._settings,n=t.inputErrorClass,o=t.errorClass,i=r._formElement.querySelector("#".concat(e.id,"-error"));i.classList.remove(n),i.textContent="",e.classList.remove(o)})),Q(this,"_checkValidity",(function(e){e.validity.valid?r._hideError(e):r._showError(e)})),Q(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),Q(this,"_toggleButtonState",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=r._settings.inactiveButtonClass;r._hasInvalidInput()||e?(r._buttonElement.classList.add(t),r._buttonElement.disabled="disabled"):(r._buttonElement.classList.remove(t),r._buttonElement.disabled=!1)})),Q(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkValidity(e),r._toggleButtonState()}))}))})),Q(this,"enableValidation",(function(){r._formElement.addEventListener("submit",(function(e){return e.preventDefault()})),r._setEventListeners()})),Q(this,"resettingFormValidation",(function(){r._buttonElement&&r._toggleButtonState(!0),r._inputList.forEach((function(e){r._hideError(e)}))})),this._settings=n,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)};function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z,ee=new function e(n){var r=this,o=n.baseUrl,i=n.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Y(this,"getUserInfo",(function(){return t("".concat(r._baseUrl,"/users/me"),{headers:r._headers})})),Y(this,"getInitialCards",(function(){return t("".concat(r._baseUrl,"/cards"),{headers:r._headers})})),Y(this,"addCard",(function(e){return t("".concat(r._baseUrl,"/cards"),{headers:r._headers,method:"POST",body:JSON.stringify({name:e["card-title"],link:e["card-link"]})})})),Y(this,"deleteCard",(function(e){return console.log("api",e),t("".concat(r._baseUrl,"/cards/").concat(e),{headers:r._headers,method:"DELETE"})})),Y(this,"likeCard",(function(e){return t("".concat(r._baseUrl,"/cards/likes/").concat(e),{headers:r._headers,method:"PUT"})})),Y(this,"dislikeCard",(function(e){return t("".concat(r._baseUrl,"/cards/likes/").concat(e),{headers:r._headers,method:"DELETE"})})),Y(this,"editProfileUserInfo",(function(e){var n=e.name,o=e.job;return t("".concat(r._baseUrl,"/users/me"),{headers:r._headers,method:"PATCH",body:JSON.stringify({name:n,about:o})})})),Y(this,"updateUserImage",(function(e){return t("".concat(r._baseUrl,"/users/me/avatar"),{headers:r._headers,method:"PATCH",body:JSON.stringify(e)})})),this._baseUrl=o,this._headers=i}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"9bc9c0f1-5a8a-40aa-b985-20e7b24d1389","Content-Type":"application/json"}});function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=new function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),X(this,"getUserInfo",(function(){return{name:o._userName.textContent,job:o._userJob.textContent,avatar:o._userImage.src}})),X(this,"setUserInfo",(function(e){var t=e.name,n=e.job,r=e.avatar;o._userName.textContent=t,o._userJob.textContent=n,o._userImage.src=r,o._userImage.alt=t})),this._userName=document.querySelector(t),this._userJob=document.querySelector(n),this._userImage=document.querySelector(r)}(".profile__name",".profile__job",".profile__image");function re(e){var t=new b(e,"#card-template",Z,(function(){le.open(e.link,e.name)}),(function(){se.open(),se.setAction((function(){ee.deleteCard(e._id).then((function(e){t.removeCard(),se.close()})).catch(console.error)}))}),(function(){t.isLiked()?ee.dislikeCard(e._id).then((function(e){t.likeCard(e.likes)})).catch(console.error):ee.likeCard(e._id).then((function(e){t.likeCard(e.likes)})).catch(console.error)}));return t}var oe,ie=oe=new function e(t,n){var r=this,o=t.items,i=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"renderer",(function(e){e.forEach((function(e){return r._renderer(e)}))})),h(this,"addItem",(function(e){r._container.append(e)})),h(this,"prependItem",(function(e){r._container.prepend(e)})),this._items=o,this._renderer=i,this._container=document.querySelector(n)}({renderer:function(e){var t=re(e);oe.addItem(t.generateCard())}},".cards__list");Promise.all([ee.getUserInfo(),ee.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Z=o._id,ne.setUserInfo({name:o.name,job:o.about,avatar:o.avatar}),ie.renderer(i)})).catch(console.error);var ae=new W(d),ce=new W(y),ue=new W(_);ae.enableValidation(),ce.enableValidation(),ue.enableValidation();var le=new q(".popup_type_image"),se=new K(".popup_type_delete-card"),fe=new D(".popup_type_edit-profile",(function(t){e(!0,s,r),ee.editProfileUserInfo(t).then((function(e){ne.setUserInfo({name:e.name,job:e.about,avatar:e.avatar}),fe.close()})).catch(console.error).finally((function(){return e(!1,s,o)}))})),pe=new D(".popup_type_update-image-profile",(function(t){e(!0,p,r),ee.updateUserImage(t).then((function(e){ne.setUserInfo({name:e.name,job:e.about,avatar:e.avatar}),pe.close()})).catch(console.error).finally((function(){return e(!1,p,o)}))})),de=new D(".popup_type_add-card",(function(t){e(!0,f,r),ee.addCard(t).then((function(e){var n=re({name:t["card-title"],link:t["card-link"],_id:e._id,owner:e.owner,likes:e.likes});ie.prependItem(n.generateCard()),de.close()})).catch(console.error).finally((function(){return e(!1,f,"Create")}))}));le.setEventListeners(),se.setEventListeners(),fe.setEventListeners(),de.setEventListeners(),pe.setEventListeners(),c.addEventListener("click",(function(){ae.resettingFormValidation();var e=ne.getUserInfo(),t=e.name,n=e.job;i.value=t,a.value=n,fe.open()})),u.addEventListener("click",(function(){ce.resettingFormValidation(),de.open()})),l.addEventListener("click",(function(){ue.resettingFormValidation(),ne.getUserInfo().avatar,pe.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0JBQ2pCd0csR0FBYXhHLG9CQUNidUcsR0FBd0J2RyxvQkFJeEJ6RSxFQUFrQjRCLGlCQUFpQixTQUFTLFdBQzFDOEksR0FBeUJTLDBCQUN6QixJQUFNdEQsRUFBT1UsR0FBUytCLGNBQ2Q1RyxFQUFjbUUsRUFBZG5FLEtBQU15RSxFQUFRTixFQUFSTSxJQUNkdEksRUFBcUIrRixNQUFRbEMsRUFDN0IzRCxFQUFvQjZGLE1BQVF1QyxFQUM1QjJDLEdBQWlCN0IsVUFJbkJoSixFQUFjMkIsaUJBQWlCLFNBQVMsV0FDdEMrSSxHQUFxQlEsMEJBQ3JCRixHQUFhaEMsVUFJZi9JLEVBQXlCMEIsaUJBQWlCLFNBQVMsV0FDakRnSixHQUF5Qk8sMEJBQ1o1QyxHQUFTK0IsY0FDZGpDLE9BQ1IyQyxHQUF3Qi9CLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCByZW5kZXJMb2FkaW5nID0gKGlzTG9hZGluZywgcG9wdXAsIHN0ckFwcHJvdmUpID0+IHtcbiAgY29uc3QgYnV0dG9uU3VibWl0ID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtX19idXR0b25cIik7XG4gIGJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IGlzTG9hZGluZyA/IFwiU2F2aW5nLi4uXCIgOiBzdHJBcHByb3ZlO1xuICByZXR1cm4gYnV0dG9uU3VibWl0LnRleHRDb250ZW50O1xufTtcblxuZXhwb3J0IGNvbnN0IGN1c3RvbUZldGNoID0gKHVybCwgaGVhZGVycykgPT5cbiAgZmV0Y2godXJsLCBoZWFkZXJzKVxuICAgIC50aGVuKChyZXMpID0+XG4gICAgICByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXNUZXh0fWApXG4gICAgKTtcbiAgICAvLy5jYXRjaChjb25zb2xlLmVycm9yKTtcbiIsImV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgLy8gcGFzcyBhbGwgdGhlIHNldHRpbmdzIG9uIGNhbGxcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25faW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X2Vycm9yXCIsXG59O1xuXG5leHBvcnQgY29uc3QgYnV0dG9uc1NldHRpbmdzID0ge1xuICBsb2FkaW5nOiBcIlNhdmluZyAuLi5cIixcbiAgZWRpdDogXCJTYXZlXCIsXG4gIGNyZWF0ZTogXCJDcmVhdGVcIixcbn07XG5cbi8vQ2FyZCBUZW1wbGF0ZVxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcblxuLy9DYXJkIExpc3RcbmV4cG9ydCBjb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gXCIuY2FyZHNfX2xpc3RcIjtcblxuLy9Vc2VyIFByb2ZpbGVcbmV4cG9ydCBjb25zdCBuYW1lUHJvZmlsZVVzZXJTZWxlY3RvciA9IFwiLnByb2ZpbGVfX25hbWVcIjtcbmV4cG9ydCBjb25zdCBqb2JQcm9maWxlVXNlclNlbGVjdG9yID0gXCIucHJvZmlsZV9fam9iXCI7XG5leHBvcnQgY29uc3QgaW1hZ2VQcm9maWxlVXNlclNlbGVjdG9yID0gXCIucHJvZmlsZV9faW1hZ2VcIjtcblxuLy9Qb3B1cFxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlUG9wdXBTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlXCI7XG5leHBvcnQgY29uc3QgYWRkQ2FyZFBvcHVwU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCI7XG5leHBvcnQgY29uc3QgZGVsZXRlQ2FyZFBvcHVwU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2RlbGV0ZS1jYXJkXCI7XG5leHBvcnQgY29uc3QgdXBkYXRlVXNlckluZm9Qb3B1cFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV91cGRhdGUtaW1hZ2UtcHJvZmlsZVwiO1xuXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9pbWFnZVwiO1xuXG4vL0ltYWdlIHBvcHVwXG5leHBvcnQgY29uc3QgaW1hZ2VTZWxlY3RvciA9IFwiLnBvcHVwX19pbWFnZVwiO1xuZXhwb3J0IGNvbnN0IGNhcHRpb25TZWxlY3RvciA9IFwiLnBvcHVwX19jYXB0aW9uXCI7XG5cbi8vSW5wdXRcbmV4cG9ydCBjb25zdCBuYW1lUHJvZmlsZUVkaXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmZvcm1fX2lucHV0X3R5cGVfbmFtZVwiXG4pO1xuZXhwb3J0IGNvbnN0IGpvYlByb2ZpbGVFZGl0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5mb3JtX19pbnB1dF90eXBlX2pvYlwiXG4pO1xuLy9jb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF90eXBlX2NhcmQtdGl0bGVcIik7XG4vL2NvbnN0IGxpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9jYXJkLWxpbmtcIik7XG5cbi8vT3BlbiBCdXR0b25zXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVJbWFnZVByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX191cGRhdGUtaW1hZ2VcIlxuKTtcblxuLy9Nb2RlbHNcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZU1vZGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGVcIlxuKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkTW9kZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIik7XG5leHBvcnQgY29uc3QgdXBkYXRlSW1hZ2VNb2RlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX3R5cGVfdXBkYXRlLWltYWdlLXByb2ZpbGVcIlxuKTtcblxuLy9Gb3JtXG5leHBvcnQgY29uc3QgZm9ybUVkaXRQcm9maWxlID0gZWRpdFByb2ZpbGVNb2RlbC5xdWVyeVNlbGVjdG9yKFxuICBzZXR0aW5ncy5mb3JtU2VsZWN0b3Jcbik7XG5leHBvcnQgY29uc3QgZm9ybVVwZGF0ZUltYWdlID0gdXBkYXRlSW1hZ2VNb2RlbC5xdWVyeVNlbGVjdG9yKFxuICBzZXR0aW5ncy5mb3JtU2VsZWN0b3Jcbik7XG5leHBvcnQgY29uc3QgZm9ybUFkZENhcmQgPSBhZGRDYXJkTW9kZWwucXVlcnlTZWxlY3RvcihzZXR0aW5ncy5mb3JtU2VsZWN0b3IpO1xuXG4vL0Nsb3NlIGJ1dHRvbnNcbmV4cG9ydCBjb25zdCBlZGl0TW9kZWxDbG9zZUJ1dHRvbiA9IGVkaXRQcm9maWxlTW9kZWwucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgYWRkQ2FyZE1vZGVsQ2xvc2VCdXR0b24gPSBhZGRDYXJkTW9kZWwucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlSW1hZ2VNb2RlbENsb3NlQnV0dG9uID0gdXBkYXRlSW1hZ2VNb2RlbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCJcbik7XG5cbi8vSW5wdXRcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZWRpdFByb2ZpbGVNb2RlbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5mb3JtX19pbnB1dF90eXBlX25hbWVcIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSm9iSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGVsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmZvcm1fX2lucHV0X3R5cGVfam9iXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2VJbnB1dCA9IHVwZGF0ZUltYWdlTW9kZWwucXVlcnlTZWxlY3RvcihcbiAgXCIuZm9ybV9faW5wdXRfdHlwZV9hdmF0YXJcIlxuKTtcblxuZXhwb3J0IGNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZE1vZGVsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmZvcm1fX2lucHV0X3R5cGVfY2FyZC10aXRsZVwiXG4pO1xuZXhwb3J0IGNvbnN0IGNhcmRMaW5rSW5wdXQgPSBhZGRDYXJkTW9kZWwucXVlcnlTZWxlY3RvcihcbiAgXCIuZm9ybV9faW5wdXRfdHlwZV9jYXJkLWxpbmtcIlxuKTtcbi8vVXNlclxuZXhwb3J0IGNvbnN0IHVzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCB1c2VySm9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fam9iXCIpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNhcmREYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICB1c2VySWQsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIGhhbmRsZUNhcmREZWxldGUsXG4gICAgaGFuZGxlTGlrZUljb25cbiAgKSB7XG4gICAgLy9wcml2YXRlXG4gICAgLy9jb25zb2xlLmxvZyhjYXJkRGF0YSk7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XG4gICAgdGhpcy5faWQgPSBjYXJkRGF0YS5faWQ7XG4gICAgdGhpcy5fb3duZXJJZCA9IGNhcmREYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl9saWtlcyA9IGNhcmREYXRhLmxpa2VzOyAvL2luc2lkZSBvZiB0aGUgY2FyZERhdGEgdGhlcmUgaXMgbGlrZXMgW10gYXJyYXlcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikgLy8jY2FyZC10ZW1wbGF0ZVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7IC8vZnVuY3Rpb24gZnJvbSB0aGUgb3V0c2lkZVxuICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uID0gaGFuZGxlTGlrZUljb247XG4gIH1cblxuICAvL3ByaXZhdGVzIG1ldGhvZHNcbiAgX2dldENhcmRUZW1wbGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9O1xuXG4gIF9pbWFnZVByb3BlcnR5U2V0dXAgPSAoaW1hZ2VFbGVtZW50KSA9PiB7XG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XG4gIH07XG5cbiAgLyoqIERlbGV0ZSBtZXRob2QgY2xpY2sgRXZlbnQgICoqL1xuICBfZGVsZXRlQ2FyZCA9IChkZWxldGVCdXR0b25FbGVtZW50KSA9PiB7XG4gICAgLyogZGlzcGxheSBidXR0b24gb3Igbm90ICovXG4gICAgaWYgKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fb3duZXJJZCkge1xuICAgICAgZGVsZXRlQnV0dG9uRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG4gICAgZGVsZXRlQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSh0aGlzLl9pZCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqIExpa2UgUHJvcGVydHkgY2xpY2sgRXZlbnQgKiovXG4gIF9jcmVhdGVMaWtlID0gKGxpa2VFbGVtZW50KSA9PiB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlcy1jb3VudFwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0aGlzLl9saWtlcy5sZW5ndGg7XG5cbiAgICBpZiAodGhpcy5pc0xpa2VkKCkpIHtcbiAgICAgIHRoaXMubGlrZUNhcmQodGhpcy5fbGlrZXMpO1xuICAgIH1cblxuICAgIGxpa2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbih0aGlzLl9pZCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqIEltYWdlIFByb3BlcnR5IGNsaWNrIEV2ZW50ICoqL1xuICBfY3JlYXRlRmlndXJlUG9wdXAgPSAoaW1hZ2VFbGVtZW50KSA9PiB7XG4gICAgaW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDYXJkQ2xpY2spO1xuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycyA9IChjYXJkRWxlbWVudCwgaW1hZ2VFbGVtZW50LCBkZWxldGVCdXR0b24pID0+IHtcbiAgICAvL2NvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlXCIpO1xuICAgIGNvbnN0IGxpa2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIik7XG5cbiAgICB0aGlzLl9kZWxldGVDYXJkKGRlbGV0ZUJ1dHRvbik7IC8vRGVsZXRlIFByb3BlcnR5IGNsaWNrIEV2ZW50XG4gICAgdGhpcy5fY3JlYXRlTGlrZShsaWtlKTsgLy9MaWtlIFByb3BlcnR5IGNsaWNrIEV2ZW50XG4gICAgdGhpcy5fY3JlYXRlRmlndXJlUG9wdXAoaW1hZ2VFbGVtZW50KTsgLy8vSW1hZ2UgUHJvcGVydHkgY2xpY2tcbiAgfTtcblxuICAvKiogUHVibGljIG1ldGhvZCBmb3IgZGVsZXRlIGNhcmQgKiovXG4gIHJlbW92ZUNhcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGVcIilcbiAgICAgIC5jbG9zZXN0KFwiLmNhcmRcIik7XG4gICAgY2FyZC5yZW1vdmUoKTtcbiAgfTtcblxuICBpc0xpa2VkID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChwZXJzb24pID0+IHBlcnNvbi5faWQgPT09IHRoaXMuX3VzZXJJZCk7XG4gIH07XG5cbiAgLyoqIFB1YmxpYyBtZXRob2QgZm9yIGFkZCBsaWtlIGNhcmQgY2FyZCAqKi9cbiAgbGlrZUNhcmQgPSAobmV3TGlrZXMpID0+IHtcbiAgICB0aGlzLl9saWtlcyA9IG5ld0xpa2VzO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlcy1jb3VudFwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0aGlzLl9saWtlcy5sZW5ndGg7IC8vbGVuZ3RoXG5cbiAgICBjb25zdCBsaWtlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZVwiKTtcbiAgICBsaWtlRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZV9hY3RpdmVcIik7XG4gIH07XG5cbiAgZ2VuZXJhdGVDYXJkID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZFRlbXBsYXRlKCk7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZVwiKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9jYXJkRWxlbWVudCwgaW1hZ2VFbGVtZW50LCBkZWxldGVCdXR0b24pO1xuXG4gICAgY29uc3QgdGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuXG4gICAgdGhpcy5faW1hZ2VQcm9wZXJ0eVNldHVwKGltYWdlRWxlbWVudCk7IC8vIEltYWdlIFByb3BlcnR5IHNldHVwXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lOyAvLyBUaXRsZSBQcm9wZXJ0eSBzZXR1cFxuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzID0gdGhpcy5zZXRFdmVudExpc3RlbmVycy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAvL2V2dC5rZXlDb2RlID09PSAyMjlcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZUNsaWNrQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgY29uc29sZS5sb2coXCIxMjNcIik7XG4gICAgLy9Tb21ldGltZXMgZXZ0LnRhcmdldCBhbmQgZXZ0LmN1cnJlbnRUYXJnZXQgYXJlIHRoZSBzYW1lIHRoaW5nXG4gICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBjb25zb2xlLmxvZyhcIjQ1NlwiKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZUJ1dHRvbkNsb3NlID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiaWNvblwiKTtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH07XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5cIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIC8vdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAvL3RoaXMuX3BvcHVwRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL2ZvciBjbG9zZSBidXR0b24gaWNvblxuICAgIHRoaXMuX3BvcHVwRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVCdXR0b25DbG9zZSk7XG4gICAgLy9mb3IgZ2VuZXJhbCBjbGlja1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gICAgLy9mb3Iga2V5ZG93biBlc2NcbiAgICAvL2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgaW1hZ2VTZWxlY3RvciwgY2FwdGlvblNlbGVjdG9yIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKGxpbmssIHRleHQpIHtcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihpbWFnZVNlbGVjdG9yKTsgLy8ucG9wdXBfX2ltYWdlXG4gICAgY29uc3QgY2FwdGlvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihjYXB0aW9uU2VsZWN0b3IpOyAvLy5wb3B1cF9fY2FwdGlvblxuXG4gICAgLy9JbWFnZSBwcm9wZXJ0aWVzXG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IHRleHQ7XG5cbiAgICAvL0ZpZ2NhcHRpb24gcHJvcGVydGllc1xuICAgIGNhcHRpb25FbGVtZW50LmFyaWFMYWJlbCA9IHRleHQ7XG4gICAgY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xuXG5cbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRIYW5kbGVyKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IC8vdGhpcy5fcG9wdXBFbGVtZW50XG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIC8vdGhpcy5zZXRFdmVudExpc3RlbmVycyA9IHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMuYmluZCh0aGlzKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcyA9ICgpID0+IHtcbiAgICBjb25zdCBpbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKV07IC8vbGlrZSBBcnJheS5mcm9tXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcblxuICAgIC8vZm9yIGFkZGluZyBjYXJkIHtjYXJkLWxpbms6IHZhbHVlLCBjYXJkLXRpdGxlOiB2YWx1ZX0sIGFuZCBmb3IgZWRpdCB7bmFtZTogdmFsdWUsIGpvYjogdmFsdWV9XG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0O1xuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuX3N1Ym1pdEhhbmRsZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgLy9jb25zb2xlLmxvZyhcIlBvcHVwV2l0aEZvcm0gd2l0aCBjbG9zZSAyXCIsdGhpcy5fZ2V0SW5wdXRWYWx1ZXMpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcbiAgLy90YWtlIGFjdGlvbiBmdW5jdGlvbiBhbmQgcmVwbGFjZSBFeGNpdGVkIGZ1bmN0aW9uXG4gIHNldEFjdGlvbiA9IChhY3Rpb24pPT4ge1xuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBhY3Rpb247XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKCk7XG5cbiAgICAgIC8vdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG5cblxuIiwiaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICAvKiBTaG93IGVycm9yID0+IGRlZmF1bHQgYnJvd3NlciBtZXNzYWdlIGZvciBpbnB1dCAqL1xuICBfc2hvd0Vycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgX2hpZGVFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9jaGVja1ZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PlxuICAgIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9IChyZXNldEZsYWcgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpIHx8IHJlc2V0RmxhZykge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjsgLy9pbnZhbGlkID0+IGRpc2FibGUgYnV0dG9uXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICAvL3ByZXZlbnQgdGhlaXIgZGVmYXVsdCBiZWhhdmlvdXJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IGV2dC5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG4gIHJlc2V0dGluZ0Zvcm1WYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9idXR0b25FbGVtZW50KSB7XG4gICAgICAvL2luYWN0aXZlIHRoZSBidXR0b25cbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEl0ZW0pO1xuICAgIH0pO1xuICB9O1xufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IGluaXRpYWxDYXJkcyBmcm9tIFwiLi4vdXRpbHMvY2FyZHMuanNcIjsgLy9kYXRhXG5pbXBvcnQgeyByZW5kZXJMb2FkaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XG4vL1NlbGVjdG9yc1xuaW1wb3J0IHtcbiAgY2FyZFRlbXBsYXRlLCAvLyNjYXJkLXRlbXBsYXRlXG4gIGNhcmRMaXN0U2VsZWN0b3IsIC8vLmNhcmRzX19saXN0XG4gIG5hbWVQcm9maWxlVXNlclNlbGVjdG9yLCAvLy5wcm9maWxlX19uYW1lXG4gIGpvYlByb2ZpbGVVc2VyU2VsZWN0b3IsIC8vLnByb2ZpbGVfX2pvYlxuICBpbWFnZVByb2ZpbGVVc2VyU2VsZWN0b3IsIC8vIC5wcm9maWxlX19pbWFnZVxuICAvL3BvcHVwIHN1Ym1pdFxuICBlZGl0UHJvZmlsZVBvcHVwU2VsZWN0b3IsIC8vLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlXG4gIHVwZGF0ZVVzZXJJbmZvUG9wdXBTZWxlY3RvciwgLy8ucG9wdXBfdHlwZV91cGRhdGUtaW1hZ2UtcHJvZmlsZVxuICBkZWxldGVDYXJkUG9wdXBTZWxlY3RvciwgLy8gLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmRcbiAgYWRkQ2FyZFBvcHVwU2VsZWN0b3IsIC8vLnBvcHVwX3R5cGVfYWRkLWNhcmRcbiAgLy9wb3B1cFxuICBpbWFnZVBvcHVwU2VsZWN0b3IsIC8vLnBvcHVwX3R5cGVfaW1hZ2VcbiAgLy9pbnB1dCB2YWx1ZVxuICBuYW1lUHJvZmlsZUVkaXRJbnB1dCwgLy8uZm9ybV9faW5wdXRfdHlwZV9uYW1lIHF1ZXJ5IHNlbGVjdG9yXG4gIGpvYlByb2ZpbGVFZGl0SW5wdXQsIC8vLmZvcm1fX2lucHV0X3R5cGVfam9iIHF1ZXJ5IHNlbGVjdG9yXG4gIHByb2ZpbGVJbWFnZUlucHV0LCAvLy5mb3JtX19pbnB1dF90eXBlX2F2YXRhciBxdWVyeSBzZWxlY3RvclxuICAvL2J1dHRvblxuICBlZGl0UHJvZmlsZUJ1dHRvbiwgLy8gLnByb2ZpbGVfX2VkaXQtYnV0dG9uIHF1ZXJ5IHNlbGVjdG9yXG4gIGFkZENhcmRCdXR0b24sIC8vIC5wcm9maWxlX19hZGQtYnV0dG9uIHF1ZXJ5IHNlbGVjdG9yXG4gIHVwZGF0ZUltYWdlUHJvZmlsZUJ1dHRvbiwgLy8gLnByb2ZpbGVfX3VwZGF0ZS1pbWFnZSBxdWVyeSBzZWxlY3RvclxuICAvL21vZGVsXG4gIGVkaXRQcm9maWxlTW9kZWwsIC8vLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlIHF1ZXJ5IHNlbGVjdG9yXG4gIGFkZENhcmRNb2RlbCwgLy8gLnBvcHVwX3R5cGVfYWRkLWNhcmQgcXVlcnkgc2VsZWN0b3JcbiAgdXBkYXRlSW1hZ2VNb2RlbCwgLy8ucG9wdXBfdHlwZV91cGRhdGUtaW1hZ2UtcHJvZmlsZSBxdWVyeSBzZWxlY3RvclxuICAvL2Zvcm1cbiAgZm9ybUVkaXRQcm9maWxlLCAvLy5mb3JtIHF1ZXJ5IHNlbGVjdG9yXG4gIGZvcm1BZGRDYXJkLCAvLy5mb3JtIHF1ZXJ5IHNlbGVjdG9yXG4gIGZvcm1VcGRhdGVJbWFnZSwgLy8uZm9ybSBxdWVyeSBzZWxlY3RvclxuICAvL2J1dHRvbnMgY29udGVudFxuICBidXR0b25zU2V0dGluZ3MsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy9Db21wb25lbnRzXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG5sZXQgdXNlcklkOyAvL3VuZGVmaW5lZFxuXG4vL1VzZXIgSW5zdGFuY2VcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBuYW1lUHJvZmlsZVVzZXJTZWxlY3RvcixcbiAgam9iUHJvZmlsZVVzZXJTZWxlY3RvcixcbiAgaW1hZ2VQcm9maWxlVXNlclNlbGVjdG9yXG4pO1xuXG4vL0NhcmQgSW5zdGFuY2VcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGNhcmREYXRhLFxuICAgIGNhcmRUZW1wbGF0ZSxcbiAgICB1c2VySWQsXG4gICAgLy8gRmlndXJlIG9wZW4gcG9wdXAgY2xpY2sgZXZlbnRcbiAgICAoKSA9PiB7XG4gICAgICBpbWFnZVBvcHVwLm9wZW4oY2FyZERhdGEubGluaywgY2FyZERhdGEubmFtZSk7XG4gICAgfSxcbiAgICAvLyBDb25maXJtIGRlbGV0ZSBjYXJkIHBvcHVwIGNsaWNrIGV2ZW50XG4gICAgKCkgPT4ge1xuICAgICAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcblxuICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldEFjdGlvbigoKSA9PiB7XG4gICAgICAgIC8vc3VibWl0IG1vZGVsXG4gICAgICAgIGFwaVxuICAgICAgICAgIC5kZWxldGVDYXJkKGNhcmREYXRhLl9pZClcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAvL3JlbW92ZSBpdCBmcm9tIGRvbVxuICAgICAgICAgICAgY2FyZC5yZW1vdmVDYXJkKCk7XG4gICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gTGlrZSBpY29uIGNsaWNrIGV2ZW50XG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgaXNBbHJlYWR5TGlrZWQgPSBjYXJkLmlzTGlrZWQoKTtcblxuICAgICAgaWYgKGlzQWxyZWFkeUxpa2VkKSB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5kaXNsaWtlQ2FyZChjYXJkRGF0YS5faWQpXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgLy9hZGQgYWN0aXZlIGxpa2UgaXQgZnJvbSBkb21cbiAgICAgICAgICAgIGNhcmQubGlrZUNhcmQocmVzLmxpa2VzKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vaWYgaXQncyBteSBmaXJzdCBjbGljayBvbiBsaWtlIGljb24gZmlsbCB0aGUgbGlrZVxuICAgICAgICBhcGlcbiAgICAgICAgICAubGlrZUNhcmQoY2FyZERhdGEuX2lkKVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIC8vYWRkIGFjdGl2ZSBsaWtlIGl0IGZyb20gZG9tXG4gICAgICAgICAgICBjYXJkLmxpa2VDYXJkKHJlcy5saWtlcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICB9XG4gICAgfVxuICApO1xuICByZXR1cm4gY2FyZDtcbn1cblxuLy9TZWN0aW9uIEluc3RhbmNlXG5mdW5jdGlvbiBjcmVhdGVTZWN0aW9uKCkge1xuICBjb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICAgIHtcbiAgICAgIC8vaXRlbXM6IGNhcmRzRGF0YSxcbiAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQuZ2VuZXJhdGVDYXJkKCkpO1xuICAgICAgfSxcbiAgICB9LFxuICAgIGNhcmRMaXN0U2VsZWN0b3JcbiAgKTtcbiAgcmV0dXJuIGNhcmRMaXN0O1xufVxuXG5jb25zdCBjYXJkc0xpc3QgPSBjcmVhdGVTZWN0aW9uKCk7IC8vZm9yIHJlbG9hZFxuLy9jYXJkc0xpc3QucmVuZGVyZXIoaW5pdGlhbENhcmRzKTsgLy9mb3IgdGhlIHN0YXJ0IG9mZmxpbmUgZGF0YVxuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmREYXRhXSkgPT4ge1xuICAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICBuYW1lOiB1c2VyRGF0YVtcIm5hbWVcIl0sXG4gICAgICBqb2I6IHVzZXJEYXRhW1wiYWJvdXRcIl0sXG4gICAgICBhdmF0YXI6IHVzZXJEYXRhW1wiYXZhdGFyXCJdLFxuICAgIH0pO1xuICAgIGNhcmRzTGlzdC5yZW5kZXJlcihjYXJkRGF0YSk7XG4gIH0pXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuLy9Gb3JtVmFsaWRhdG9yIEluc3RhbmNlc1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVkaXRQcm9maWxlKTtcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUFkZENhcmQpO1xuY29uc3QgdXBkYXRlSW1hZ2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVVwZGF0ZUltYWdlKTtcbi8vZW5hYmxlIFZhbGlkYXRpb24gbWV0aG9kXG5lZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xudXBkYXRlSW1hZ2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy9Qb3B1cCBJbnN0YW5jZXNcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoaW1hZ2VQb3B1cFNlbGVjdG9yKTsgLy9pbiB0aGUgQ2FyZFxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aFN1Ym1pdChkZWxldGVDYXJkUG9wdXBTZWxlY3Rvcik7IC8vaW4gdGhlIENhcmRcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgZWRpdFByb2ZpbGVQb3B1cFNlbGVjdG9yLFxuICAvL1N1Ym1pdCBoYW5kbGUgZWRpdCBwcm9maWxlXG4gIChkYXRhKSA9PiB7XG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBlZGl0UHJvZmlsZU1vZGVsLCBidXR0b25zU2V0dGluZ3MubG9hZGluZyk7XG5cbiAgICBhcGlcbiAgICAgIC5lZGl0UHJvZmlsZVVzZXJJbmZvKGRhdGEpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgICAgICBuYW1lOiByZXMubmFtZSwgLy9kYXRhLm5hbWVcbiAgICAgICAgICBqb2I6IHJlcy5hYm91dCwgLy9kYXRhLmpvYlxuICAgICAgICAgIGF2YXRhcjogcmVzLmF2YXRhcixcbiAgICAgICAgfSk7XG4gICAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAgIC5maW5hbGx5KCgpID0+XG4gICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGVkaXRQcm9maWxlTW9kZWwsIGJ1dHRvbnNTZXR0aW5ncy5lZGl0KVxuICAgICAgKTtcbiAgfVxuKTtcbmNvbnN0IHVwZGF0ZUltYWdlUHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHVwZGF0ZVVzZXJJbmZvUG9wdXBTZWxlY3RvcixcbiAgLy9TdWJtaXQgaGFuZGxlIHVwZGF0ZSBpbWFnZVxuICAoZGF0YSkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgdXBkYXRlSW1hZ2VNb2RlbCwgYnV0dG9uc1NldHRpbmdzLmxvYWRpbmcpO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZVVzZXJJbWFnZShkYXRhKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgICAgbmFtZTogcmVzLm5hbWUsXG4gICAgICAgICAgam9iOiByZXMuYWJvdXQsXG4gICAgICAgICAgYXZhdGFyOiByZXMuYXZhdGFyLCAvL2RhdGEuYXZhdGFyLFxuICAgICAgICB9KTtcbiAgICAgICAgdXBkYXRlSW1hZ2VQcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAgIC5maW5hbGx5KCgpID0+XG4gICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIHVwZGF0ZUltYWdlTW9kZWwsIGJ1dHRvbnNTZXR0aW5ncy5lZGl0KVxuICAgICAgKTtcbiAgfVxuKTtcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBhZGRDYXJkUG9wdXBTZWxlY3RvcixcbiAgLy9TdWJtaXQgaGFuZGxlIG5ldyBjYXJkXG4gIChkYXRhKSA9PiB7XG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBhZGRDYXJkTW9kZWwsIGJ1dHRvbnNTZXR0aW5ncy5sb2FkaW5nKTtcbiAgICBhcGlcbiAgICAgIC5hZGRDYXJkKGRhdGEpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKHtcbiAgICAgICAgICBuYW1lOiBkYXRhW1wiY2FyZC10aXRsZVwiXSxcbiAgICAgICAgICBsaW5rOiBkYXRhW1wiY2FyZC1saW5rXCJdLFxuICAgICAgICAgIF9pZDogcmVzLl9pZCwgLy9faWQgaSBoYXZlIHNvbWUgcHJvYmxlbSBpZiBpIGRvbid0IF9pZFxuICAgICAgICAgIG93bmVyOiByZXMub3duZXIsXG4gICAgICAgICAgbGlrZXM6IHJlcy5saWtlcyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNhcmRzTGlzdC5wcmVwZW5kSXRlbShjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcbiAgICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgICAuZmluYWxseSgoKSA9PlxuICAgICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBhZGRDYXJkTW9kZWwsIGJ1dHRvbnNTZXR0aW5ncy5jcmVhdGUpXG4gICAgICApO1xuICB9XG4pO1xuXG4vL1NldCBwb3B1cFxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyAvL2luc2lkZSBjYXJkc1xuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vaW5zaWRlIGNhcmRzXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnVwZGF0ZUltYWdlUHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qKiogRXZlbnQgY2xpY2sgKioqL1xuLy8gRWRpdFxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0dGluZ0Zvcm1WYWxpZGF0aW9uKCk7XG4gIGNvbnN0IGRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gZGF0YTtcbiAgbmFtZVByb2ZpbGVFZGl0SW5wdXQudmFsdWUgPSBuYW1lO1xuICBqb2JQcm9maWxlRWRpdElucHV0LnZhbHVlID0gam9iO1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vLyBBZGRcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXR0aW5nRm9ybVZhbGlkYXRpb24oKTtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vLyBVcGRhdGVcbnVwZGF0ZUltYWdlUHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICB1cGRhdGVJbWFnZUZvcm1WYWxpZGF0b3IucmVzZXR0aW5nRm9ybVZhbGlkYXRpb24oKTtcbiAgY29uc3QgZGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGNvbnN0IHsgYXZhdGFyIH0gPSBkYXRhO1xuICB1cGRhdGVJbWFnZVByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcbiIsImltcG9ydCB7Y3VzdG9tRmV0Y2h9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiXG5cbmNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgLy8gY29uc3RydWN0b3IgYm9keVxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgLy8gTG9hZGluZyBVc2VyIEluZm9ybWF0aW9uIGZyb20gdGhlIFNlcnZlclxuICBnZXRVc2VySW5mbyA9ICgpID0+IHtcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9O1xuXG4gIC8vIExvYWRpbmcgQ2FyZHMgZnJvbSB0aGUgU2VydmVyXG4gIGdldEluaXRpYWxDYXJkcyA9ICgpID0+IHtcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9O1xuXG5cblxuICAvLyBBZGRpbmcgYSBOZXcgQ2FyZFxuICBhZGRDYXJkID0gKGRhdGEpID0+IHtcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YVtcImNhcmQtdGl0bGVcIl0sXG4gICAgICAgIGxpbms6IGRhdGFbXCJjYXJkLWxpbmtcIl0sXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfTtcblxuICAvLyBEZWxldGluZyBhIENhcmRcbiAgZGVsZXRlQ2FyZCA9IChjYXJkSWQpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcImFwaVwiLGNhcmRJZClcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICB9KTtcbiAgfTtcblxuICAvLyBBZGRpbmcgIExpa2VzXG4gIGxpa2VDYXJkID0gKGNhcmRJZCkgPT4ge1xuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBVVFwiXG4gICAgfSk7XG4gIH07XG5cbiAgLy8gUmVtb3ZpbmcgTGlrZXNcbiAgZGlzbGlrZUNhcmQgPSAoY2FyZElkKSA9PiB7XG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCJcbiAgICB9KTtcbiAgfTtcblxuICAvLyBFZGl0aW5nIHRoZSBQcm9maWxlXG4gIGVkaXRQcm9maWxlVXNlckluZm8gPSAoeyBuYW1lLCBqb2IgfSkgPT4ge1xuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQ6IGpvYixcbiAgICAgIH0pXG4gICAgfSk7XG4gIH07XG5cbiAgLy8gVXBkYXRpbmcgUHJvZmlsZSBQaWN0dXJlXG4gIHVwZGF0ZVVzZXJJbWFnZSA9IChhdmF0YXIpID0+IHtcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXZhdGFyKSxcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiOWJjOWMwZjEtNWE4YS00MGFhLWI5ODUtMjBlN2IyNGQxMzg5XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yLCB1c2VySW1hZ2VTZWxlY3Rvcikge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckltYWdlU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8gPSAoKSA9PiB7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50O1xuICAgIGNvbnN0IGpvYiA9IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQ7XG4gICAgY29uc3QgYXZhdGFyID0gdGhpcy5fdXNlckltYWdlLnNyYztcblxuICAgIC8vcmV0dXJuIHsgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsIGpvYjogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCB9O1xuICAgIHJldHVybiB7IG5hbWUsIGpvYiwgYXZhdGFyIH07XG4gIH07XG5cblxuXG4gIHNldFVzZXJJbmZvID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIGpvYiwgYXZhdGFyIH0gPSBkYXRhO1xuICAgLy9jb25zdCBhdmF0YXIgPSBkYXRhLmF2YXRhcjtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCA9IGpvYjtcblxuICAgIHRoaXMuX3VzZXJJbWFnZS5zcmMgPSBhdmF0YXI7XG4gICAgLy9jb25zb2xlLmxvZyhcImhlbGxvXCIsZGF0YSlcbiAgICB0aGlzLl91c2VySW1hZ2UuYWx0ID0gbmFtZTtcbiAgfTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcblxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVyZXIgPSAoaXRlbXMpID0+IHtcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gIH07XG5cbiAgYWRkSXRlbSA9IChlbGVtZW50KSA9PiB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfTtcblxuICBwcmVwZW5kSXRlbSA9IChlbGVtZW50KSA9PiB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH07XG59XG4iXSwibmFtZXMiOlsicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsInBvcHVwIiwic3RyQXBwcm92ZSIsImJ1dHRvblN1Ym1pdCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImN1c3RvbUZldGNoIiwidXJsIiwiaGVhZGVycyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXNUZXh0Iiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImJ1dHRvbnNTZXR0aW5ncyIsIm5hbWVQcm9maWxlRWRpdElucHV0IiwiZG9jdW1lbnQiLCJqb2JQcm9maWxlRWRpdElucHV0IiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwidXBkYXRlSW1hZ2VQcm9maWxlQnV0dG9uIiwiZWRpdFByb2ZpbGVNb2RlbCIsImFkZENhcmRNb2RlbCIsInVwZGF0ZUltYWdlTW9kZWwiLCJmb3JtRWRpdFByb2ZpbGUiLCJmb3JtVXBkYXRlSW1hZ2UiLCJmb3JtQWRkQ2FyZCIsIkNhcmQiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmREZWxldGUiLCJoYW5kbGVMaWtlSWNvbiIsIl9jYXJkVGVtcGxhdGUiLCJjbG9uZU5vZGUiLCJpbWFnZUVsZW1lbnQiLCJzcmMiLCJfbGluayIsImFsdCIsIl9uYW1lIiwiZGVsZXRlQnV0dG9uRWxlbWVudCIsIl91c2VySWQiLCJfb3duZXJJZCIsInN0eWxlIiwiZGlzcGxheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9pZCIsImxpa2VFbGVtZW50IiwiX2NhcmRFbGVtZW50IiwiX2xpa2VzIiwibGVuZ3RoIiwiaXNMaWtlZCIsImxpa2VDYXJkIiwiZXZ0IiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZUNhcmRDbGljayIsImNhcmRFbGVtZW50IiwiZGVsZXRlQnV0dG9uIiwibGlrZSIsIl9kZWxldGVDYXJkIiwiX2NyZWF0ZUxpa2UiLCJfY3JlYXRlRmlndXJlUG9wdXAiLCJjbG9zZXN0IiwicmVtb3ZlIiwic29tZSIsInBlcnNvbiIsIm5ld0xpa2VzIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2dldENhcmRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInRpdGxlIiwiX2ltYWdlUHJvcGVydHlTZXR1cCIsInRoaXMiLCJuYW1lIiwibGluayIsIm93bmVyIiwibGlrZXMiLCJfY2FyZFNlbGVjdG9yIiwiY29udGVudCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlIiwiY29uc29sZSIsImxvZyIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJfcG9wdXBFbGVtZW50Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJiaW5kIiwiYWRkIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVCdXR0b25DbG9zZSIsIl9oYW5kbGVDbGlja0Nsb3NlIiwiUG9wdXBXaXRoSW1hZ2UiLCJ0ZXh0IiwiY2FwdGlvbkVsZW1lbnQiLCJhcmlhTGFiZWwiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0SGFuZGxlciIsImlucHV0TGlzdCIsIl9mb3JtRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwiX3N1Ym1pdEhhbmRsZXIiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoU3VibWl0IiwiYWN0aW9uIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiX3NldHRpbmdzIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yIiwiX3Nob3dFcnJvciIsIl9pbnB1dExpc3QiLCJyZXNldEZsYWciLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja1ZhbGlkaXR5IiwiaW5wdXRJdGVtIiwiQXJyYXkiLCJmcm9tIiwiYXBpIiwiYmFzZVVybCIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJkYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJqb2IiLCJhYm91dCIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VySm9iU2VsZWN0b3IiLCJ1c2VySW1hZ2VTZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VySm9iIiwiX3VzZXJJbWFnZSIsImNyZWF0ZUNhcmQiLCJjYXJkIiwiaW1hZ2VQb3B1cCIsIm9wZW4iLCJkZWxldGVDYXJkUG9wdXAiLCJzZXRBY3Rpb24iLCJyZW1vdmVDYXJkIiwiY2F0Y2giLCJlcnJvciIsImNhcmRMaXN0IiwiY2FyZHNMaXN0IiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiaXRlbSIsIl9yZW5kZXJlciIsImVsZW1lbnQiLCJfY29udGFpbmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsIl9pdGVtcyIsImFkZEl0ZW0iLCJnZW5lcmF0ZUNhcmQiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsInVzZXJEYXRhIiwic2V0VXNlckluZm8iLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsInVwZGF0ZUltYWdlRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJlZGl0UHJvZmlsZVBvcHVwIiwiZmluYWxseSIsInVwZGF0ZUltYWdlUHJvZmlsZVBvcHVwIiwiYWRkQ2FyZFBvcHVwIiwicHJlcGVuZEl0ZW0iLCJyZXNldHRpbmdGb3JtVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=